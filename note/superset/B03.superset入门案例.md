### superset入门案例

需求：

* 使用Superset展示不同性别的用户人数

* 效果图

![1571543086714](assets/1571543086714-1582006347414.png)



准备环境

```shell
yum install python-devel -y
yum install mysql-devel -y
yum install gcc -y
pip install mysqlclient
```



实现步骤：

1、导入MySQL数据源

导入资料中的  `superset\数据源\superset_demo.sql`



2、添加新的数据库

mysql的url地址

```sql
mysql://root:123456@node1/superset_demo?charset=utf8
```

| <img src="assets/1571543686973.png" align="left" /> |
| --------------------------------------------------- |
| ![1571543732584](assets/1571543732584.png)          |





3、点击 SQLLab > SQL Editor编写以下SQL语句

选择 数据库



| 选择表，查看表的列                                  |
| --------------------------------------------------- |
| <img src="assets/1571571903745.png" align="left" /> |



参考SQL语句：

```sql
select
	case when gender = 0 then '男'
		when gender = 1 then '女'
		else '保密'
    end as gender,
	count(id) as total_cnt
from 
	t_user
group by gender
```



4、保存查询



5、点击 saved queries

| 保存查询                                   |
| ------------------------------------------ |
| ![1571544326994](assets/1571544326994.png) |





* 运行查询，点击 Explore 浏览数据

  | 浏览数据                                   |
    | ------------------------------------------ |
  | ![1571543342386](assets/1571543342386.png) |





6、配置图表类型为 Bar Chart 条形图

| 选择bar chart                                       |
| --------------------------------------------------- |
| <img src="assets/1571543447586.png" align="left" /> |





7、指定统计指标 sum(total_cnt)

8、指定序列为 gender（性别）

| 修改分组字段                                        |
| --------------------------------------------------- |
| <img src="assets/1571543490325.png" align="left" /> |

