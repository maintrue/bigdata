# 1 INCR
某新闻APP应用为了统计每个新闻的每隔一段时间的访问次数，他们将这些数据保存在HBase中。

该表格数据如下所示：

| 新闻ID    | 访问次数    | 时间段 | ROWKEY
| --- | --- | --- | ---
| 0000000001  | 12  | 00:00-01:00 | 0000000001_00:00-01:00
| 0000000002  | 12  | 01:00-02:00 | 0000000002_01:00-02:00

要求：原子性增加新闻的访问次数值。

## 1.1 incr操作简介
incr可以实现对某个单元格的值进行原子性计数。语法如下：
``` 
incr '表名','rowkey','列蔟:列名',累加值（默认累加1）
```
如果某一列要实现计数功能，必须要使用incr来创建对应的列

使用put创建的列是不能实现累加的

## 1.2 导入测试数据
该脚本创建了一个表，名为NEWS_VISIT_CNT，列蔟为C1。并使用incr创建了若干个计数器，每个rowkey为：新闻的编号_时间段。CNT为count的缩写，表示访问的次数。
``` 
hbase shell /export/software/NEWS_VISIT_CNT.txt 
scan 'NEWS_VISIT_CNT', {LIMIT => 5, FORMATTER => 'toString'}
```

## 1.3 对0000000020新闻01:00 - 02:00访问计数+1
1.获取0000000020这条新闻在01:00-02:00当前的访问次数
``` 
get_counter'NEWS_VISIT_CNT','0000000020_01:00-02:00','C1:CNT'
```

此处，如果用get获取到的数据是这样的：
``` 
base(main):029:0> get 'NEWS_VISIT_CNT','0000000020_01:00-02:00','C1:CNT'
COLUMN CELL 
C1:CNT timestamp=1599529533072, value=\x00\x00\x00\x00\x00\x00\x00\x06 
1 row(s)
Took 0.0243 seconds
```

2.使用incr进行累加
``` 
incr 'NEWS_VISIT_CNT','0000000020_01:00-02:00','C1:CNT'
```

3.再次查案新闻当前的访问次数
``` 
get_counter 'NEWS_VISIT_CNT','0000000020_01:00-02:00','C1:CNT'
```

